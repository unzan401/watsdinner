(function(t){function e(e){for(var o,i,c=e[0],r=e[1],d=e[2],l=0,b=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(e);while(b.length)b.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},s=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/watsdinner/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3b31":function(t,e,n){"use strict";n("c6fd")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={class:"navbar navbar-light bg-white fixed-top"},s={class:"container-fluid"},i=Object(o["g"])("img",{src:"/watsdinner/favicon.ico",alt:"吃什麼logo",style:{height:"30px",width:"30px","vertical-align":"bottom"}},null,-1),c=Object(o["f"])("login"),r={class:"container",style:{"padding-top":"60px"}};function d(t,e,n,d,u,l){var b=Object(o["w"])("router-link"),f=Object(o["w"])("router-view");return Object(o["p"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("header",null,[Object(o["g"])("nav",a,[Object(o["g"])("div",s,[Object(o["g"])(b,{class:"navbar-brand",to:"/",style:{"font-family":"'Noto Serif TC', serif"}},{default:Object(o["D"])((function(){return[i,Object(o["f"])(Object(o["y"])(t.Title),1)]})),_:1})]),Object(o["g"])(b,{class:"nav-link text-light",to:"/QuestionSetting",style:{"margin-right":"50px"}},{default:Object(o["D"])((function(){return[c]})),_:1})])]),Object(o["g"])("div",r,[Object(o["g"])(f)])],64)}var u={data:function(){return{Title:"吃什麼？"}}};u.render=d;var l=u,b=(n("7b17"),n("ab8b"),n("6c02")),f={class:"Wathome"};function p(t,e,n,a,s,i){var c=Object(o["w"])("Watsdinner",!0);return Object(o["p"])(),Object(o["d"])("div",f,[Object(o["g"])(c)])}var h=Object(o["F"])("data-v-b3e77846");Object(o["s"])("data-v-b3e77846");var O={class:"Watsdinner"},g={key:0,class:"container"},j=Object(o["g"])("h1",null,"為煩惱吃什麼的人給個方向！",-1),v=Object(o["g"])("p",null,"中餐吃什麼？晚餐吃什麼？這是大家常見的問題！",-1),w=Object(o["g"])("p",null,"但一直都沒有合適的決策方式，如果能有人幫我決定我想吃的食物就好了。",-1),m=Object(o["g"])("p",null,"透過一連串的選項篩選出可能想吃的食物，最終解決亙古無解的吃什麼問題。",-1),y={class:"col-12"},A={key:1,class:"container"},q={class:"row",style:{"min-height":"200px","align-items":"center"}},k={class:"col-6"},x={class:"col-6"},_={class:"col-12"},S={class:"modal fade",tabindex:"-1",id:"questionnaire"},I={class:"modal-dialog modal-fullscreen align-items-center"},Q={class:"modal-content"},C=Object(o["g"])("div",{class:"modal-header"},[Object(o["g"])("h5",{class:"modal-title"},"問卷調查"),Object(o["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},M={class:"container"},U=Object(o["g"])("h1",null,"在開始之前，協助我們預測得更好！",-1),P=Object(o["f"])(" 在下列問題中，你認為針對"),T={class:"text-danger",style:{}},V=Object(o["f"])("而言，"),W={class:"text-danger",style:{}},D=Object(o["f"])("應該會在哪個選項中出現？ "),R=Object(o["g"])("div",{class:"w-100",style:{height:"1px","background-color":"#bbbbbb",margin:"20px 0"}},null,-1),B={class:"row",style:{"min-height":"200px","align-items":"center"}},L={class:"col-6"},H={class:"col-6"},N={class:"col-12"};Object(o["q"])();var z=h((function(t,e,n,a,s,i){return Object(o["p"])(),Object(o["d"])("div",O,[1==t.open?(Object(o["p"])(),Object(o["d"])("div",g,[j,v,w,m,Object(o["g"])("div",y,[Object(o["g"])("button",{type:"button",onClick:e[1]||(e[1]=function(t){return i.start()}),class:"btn btn-success w-100"}," 立刻開始 ")])])):Object(o["e"])("",!0),2==t.open?(Object(o["p"])(),Object(o["d"])("div",A,[Object(o["g"])("div",q,[Object(o["g"])("h1",null,Object(o["y"])(t.question),1),Object(o["g"])("div",k,[Object(o["g"])("button",{type:"button",onClick:e[2]||(e[2]=function(t){return i.answer(!0)}),class:"btn btn-primary w-100"},Object(o["y"])(t.Answer1),1)]),Object(o["g"])("div",x,[Object(o["g"])("button",{type:"button",onClick:e[3]||(e[3]=function(t){return i.answer(!1)}),class:"btn btn-secondary w-100"},Object(o["y"])(t.Answer2),1)]),Object(o["g"])("div",_,[t.tag!=t.end?(Object(o["p"])(),Object(o["d"])("button",{key:0,type:"button",onClick:e[4]||(e[4]=function(t){return i.answer("nvm")}),class:"btn btn-success w-100"}," 都可以 ")):Object(o["e"])("",!0)])])])):Object(o["e"])("",!0),Object(o["g"])("div",S,[Object(o["g"])("div",I,[Object(o["g"])("div",Q,[C,Object(o["g"])("div",E,[Object(o["g"])("div",M,[U,Object(o["g"])("p",null,[P,Object(o["g"])("span",T,Object(o["y"])(t.food),1),V,Object(o["g"])("span",W,Object(o["y"])(t.food),1),D]),R,Object(o["g"])("div",B,[Object(o["g"])("h1",null,Object(o["y"])(t.testQuestion.question),1),Object(o["g"])("div",L,[Object(o["g"])("button",{type:"button",onClick:e[5]||(e[5]=function(t){return i.testAnswer(!0)}),class:"btn btn-primary w-100"},Object(o["y"])(t.testQuestion.Answer1),1)]),Object(o["g"])("div",H,[Object(o["g"])("button",{type:"button",onClick:e[6]||(e[6]=function(t){return i.testAnswer(!1)}),class:"btn btn-secondary w-100"},Object(o["y"])(t.testQuestion.Answer2),1)]),Object(o["g"])("div",N,[Object(o["g"])("button",{type:"button",onClick:e[7]||(e[7]=function(t){return i.testAnswer("nvm")}),class:"btn btn-success w-100"}," 都可以 ")])])])])])])])])})),F=(n("4de4"),n("caad"),n("2532"),n("4e82"),n("d81d"),n("b0c0"),n("260b")),G=(n("ea7b"),n("e71f"),n("66ce"),{apiKey:"AIzaSyATyjHj-0-GJHEHT6MynSrTGb5xLWOzP88",authDomain:"watsdinner.firebaseapp.com",databaseURL:"https://watsdinner-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"watsdinner",storageBucket:"watsdinner.appspot.com",messagingSenderId:"515938229741",appId:"1:515938229741:web:534f9b05117b5265559be4"});F["a"].initializeApp(G);var J,K=n("3e48"),X=n.n(K),Y={name:"Watsdinner",data:function(){return{question:"",Answer1:"",Answer2:"",question_count:1,question_length:1,data:[{question:"",Answer1:"",Answer2:""}],foods:{},tag:"",tagsfoods:[],open:1,food:"",testQuestion:[{question:"",Answer1:"",Answer2:""}]}},methods:{start:function(){this.open=2,J.show()},testAnswer:function(t){var e={food:this.food,question:this.testQuestion.question,answer:t};F["a"].database().ref("watsdinner/questionnaire").push(e),J.hide()},answer:function(t){"end"==this.tag?this.refresh():("nvm"==t||this.checkTagsfoods(this.question_count-1,t),this.nextQuestion())},checkTagsfoods:function(t,e){var n=this.data[t].tagsfoods,o=this.data[t].independentfoods;void 0==n&&(n=[]),void 0==o&&(o=[]),this.foods=e?this.foods.filter((function(t){return n.includes(t)|o.includes(t)})):this.foods.filter((function(t){return!1===n.includes(t)}))},nextQuestion:function(){var t=!0;while(t){if(this.foods.length<=5|this.question_count==this.question_length-1){this.getResult(),this.question_count=1;break}var e=this.data[this.question_count].tagsfoods,n=this.data[this.question_count].independentfoods;if(void 0==e&&(e=[]),void 0==n&&(n=[]),!(0==this.foods.filter((function(t){return e.includes(t)|n.includes(t)})).length|this.foods.filter((function(t){return!1===e.includes(t)})))){this.question=this.data[this.question_count].question,this.Answer1=this.data[this.question_count].Answer1,this.Answer2=this.data[this.question_count].Answer2,this.question_count++;break}this.question_count++}},getResult:function(){0==this.foods.length?this.question="看來你今天一點也不想吃。":this.question="我認為你可能想吃"+this.foods+"。",this.Answer1="太棒了",this.Answer2="天啊，我不要",this.tag="end"},refresh:function(){var t=this;F["a"].database().ref("watsdinner/data").once("value",(function(e){t.data=e.val(),t.data.sort((function(){return Math.random()-.5})),t.question=t.data[0].question,t.Answer1=t.data[0].Answer1,t.Answer2=t.data[0].Answer2,t.question_length=t.data.length,t.tagsfoods=t.data[0].tagsfoods})),F["a"].database().ref("watsdinner/foods").once("value",(function(e){t.foods=e.val(),t.foods=t.foods.map((function(t){return t.name}))})),this.tag=""}},created:function(){var t=this;F["a"].database().ref("watsdinner/data").once("value",(function(e){t.data=e.val(),t.data.sort((function(){return Math.random()-.5})),t.question=t.data[0].question,t.Answer1=t.data[0].Answer1,t.Answer2=t.data[0].Answer2,t.tagsfoods=t.data[0].tagsfoods,t.question_length=t.data.length,t.testQuestion=t.data[t.data.length-1]})),F["a"].database().ref("watsdinner/foods").once("value",(function(e){t.foods=e.val(),t.foods=t.foods.map((function(t){return t.name})),t.food=t.foods[Math.floor(t.foods.length*Math.random())]}))},mounted:function(){J=new X.a.Modal(document.getElementById("questionnaire"))}};n("3b31");Y.render=z,Y.__scopeId="data-v-b3e77846";var Z=Y,$={name:"Wathome",components:{Watsdinner:Z}};$.render=p;var tt=$,et={class:"questionhome"};function nt(t,e,n,a,s,i){var c=Object(o["w"])("QuestionSetting",!0);return Object(o["p"])(),Object(o["d"])("div",et,[Object(o["g"])(c)])}var ot=Object(o["F"])("data-v-55b5f1c8");Object(o["s"])("data-v-55b5f1c8");var at={class:"QuestionSetting"},st={key:0,class:"container",id:"firebaseui-auth-container"},it={key:1,class:"container"},ct={key:0,class:"row",id:"question_form"},rt={class:"col-12"},dt=Object(o["f"])(" 分類用的問題："),ut={class:"col-6"},lt=Object(o["f"])(" 符合答案"),bt={class:"col-6"},ft=Object(o["f"])(" 不符合答案"),pt={class:"col-12"},ht={class:"row bg-white",style:{position:"sticky",top:"50px",padding:"10px 0","margin-top":"10px","margin-bottom":"10px","border-top":"#dddddd 1px solid","border-bottom":"#dddddd 1px solid"}},Ot=Object(o["g"])("h3",{class:"mt-2"},"預覽",-1),gt={class:"col-6"},jt={type:"button",class:"btn btn-primary w-100"},vt={class:"col-6"},wt={type:"button",class:"btn btn-secondary w-100"},mt={key:1,class:"col-12"},yt=Object(o["f"])(" 資料庫已經有的分類問題： "),At={key:2,class:"row"},qt=Object(o["g"])("div",{class:"col-12"},[Object(o["g"])("h4",null,"請勾選符合問題的食物")],-1),kt={class:"w-100"},xt={class:"text-end"},_t={class:"form-check form-check-inline"},St={class:"col-12"},It=Object(o["g"])("div",{class:"w-100",style:{height:"1px","background-color":"#bbbbbb",margin:"3px"}},null,-1);Object(o["q"])();var Qt=ot((function(t,e,n,a,s,i){return Object(o["p"])(),Object(o["d"])("div",at,[0==t.login?(Object(o["p"])(),Object(o["d"])("div",st)):Object(o["e"])("",!0),t.login?(Object(o["p"])(),Object(o["d"])("div",it,[0==t.typein?(Object(o["p"])(),Object(o["d"])("div",ct,[Object(o["g"])("div",rt,[dt,Object(o["E"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.data.question=e}),class:"w-100",placeholder:"例如：想吃中式還是異國料理？",required:""},null,512),[[o["B"],t.data.question]])]),Object(o["g"])("div",ut,[lt,Object(o["E"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.data.Answer1=e}),class:"w-100",placeholder:"例如：中式",required:""},null,512),[[o["B"],t.data.Answer1]])]),Object(o["g"])("div",bt,[ft,Object(o["E"])(Object(o["g"])("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.data.Answer2=e}),class:"w-100",placeholder:"例如：異國料理",required:""},null,512),[[o["B"],t.data.Answer2]])]),Object(o["g"])("div",pt,[Object(o["g"])("button",{type:"submit",onClick:e[4]||(e[4]=function(t){return i.typeinStart()}),class:"btn btn-success w-100"}," 確定 ")])])):Object(o["e"])("",!0),Object(o["g"])("div",ht,[Ot,Object(o["g"])("h1",null,Object(o["y"])(t.data.question),1),Object(o["g"])("div",gt,[Object(o["g"])("button",jt,Object(o["y"])(t.data.Answer1),1)]),Object(o["g"])("div",vt,[Object(o["g"])("button",wt,Object(o["y"])(t.data.Answer2),1)])]),0==t.typein?(Object(o["p"])(),Object(o["d"])("div",mt,[yt,Object(o["g"])("ol",null,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(t.questions,(function(t,e){return Object(o["p"])(),Object(o["d"])("li",{key:t.id},[Object(o["g"])("a",{href:"#",onclick:"return false",onClick:function(t){return i.changeQuestion(e)}},Object(o["y"])(t),9,["onClick"])])})),128))])])):Object(o["e"])("",!0),t.typein?(Object(o["p"])(),Object(o["d"])("div",At,[qt,Object(o["g"])("table",kt,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(t.foods,(function(e,n){return Object(o["p"])(),Object(o["d"])("tr",{class:"fooditems",key:e.id},[Object(o["g"])("td",xt,Object(o["y"])(e),1),Object(o["g"])("td",null,[Object(o["g"])("div",_t,[Object(o["E"])(Object(o["g"])("input",{name:"radio"+n,type:"radio",id:"radio"+n+"1",value:"1","onUpdate:modelValue":function(e){return t.foodstype[n]=e}},null,8,["name","id","onUpdate:modelValue"]),[[o["A"],t.foodstype[n]]]),Object(o["g"])("label",{class:"form-check-label",for:"radio"+n+"1",style:{"margin-right":"3rem"}},Object(o["y"])(t.data.Answer1),9,["for"]),Object(o["E"])(Object(o["g"])("input",{name:"radio"+n,type:"radio",id:"radio"+n+"2",value:"0","onUpdate:modelValue":function(e){return t.foodstype[n]=e},checked:""},null,8,["name","id","onUpdate:modelValue"]),[[o["A"],t.foodstype[n]]]),Object(o["g"])("label",{class:"form-check-label",for:"radio"+n+"2",style:{"margin-right":"3rem"}},Object(o["y"])(t.data.Answer2),9,["for"]),Object(o["E"])(Object(o["g"])("input",{name:"radio"+n,type:"radio",id:"radio"+n+"3",value:"nvm","onUpdate:modelValue":function(e){return t.foodstype[n]=e}},null,8,["name","id","onUpdate:modelValue"]),[[o["A"],t.foodstype[n]]]),Object(o["g"])("label",{class:"form-check-label",for:"radio"+n+"3",style:{"margin-right":"3rem"}},"兩個選項都符合",8,["for"])])])])})),128))]),Object(o["g"])("div",St,[It,Object(o["g"])("p",null,Object(o["y"])(t.data.Answer1)+"："+Object(o["y"])(t.data.tagsfoods),1),Object(o["g"])("p",null,"兩項都符合的食物："+Object(o["y"])(t.data.independentfoods),1),Object(o["g"])("button",{type:"button",onClick:e[5]||(e[5]=function(t){return i.update()}),class:"btn btn-success w-100"}," 確定 ")])])):Object(o["e"])("",!0)])):Object(o["e"])("",!0)])})),Ct=n("2398"),Et=new Ct.auth.AuthUI(F["a"].auth()),Mt={name:"QuestionSetting",data:function(){return{typein:!1,data:{question:"",Answer1:"",Answer2:"",tagsfoods:[],independentfoods:[]},foods:[],foodstype:[],len:0,questions:[],login:!1}},watch:{foodstype:{handler:function(){this.checkAnswer()},deep:!0}},methods:{typeinStart:function(){""!==this.data.question&""!==this.data.Answer1&""!==this.data.Answer2?(this.typein=!0,window.history.pushState([],"/"),window.onpopstate=this.refresh):alert("請輸入問題與其回答選項！")},changeQuestion:function(t){var e=this;return F["a"].database().ref("watsdinner/data").once("value",(function(n){e.data=n.val()[t];var o=e.data.tagsfoods,a=e.data.independentfoods;void 0==o&&(o=[]),void 0==a&&(a=[]),e.foodstype=e.foodstype.map((function(t,n){return o.includes(e.foods[n])?"1":a.includes(e.foods[n])?"nvm":"0"}))})),this.typein=!0,this.changein=!0,window.history.pushState([],"/"),window.onpopstate=this.refresh,this.questionIndex=t,!1},checkAnswer:function(){var t=this;this.data.tagsfoods=this.foods.filter((function(e){return"1"==t.foodstype[t.foods.indexOf(e)]})),this.data.independentfoods=this.foods.filter((function(e){return"nvm"==t.foodstype[t.foods.indexOf(e)]}))},update:function(){var t={};this.changein?t[this.questionIndex]=this.data:t[this.len]=this.data,F["a"].database().ref("watsdinner/data").update(t),this.refresh()},refresh:function(){var t=this;F["a"].database().ref("watsdinner/foods").once("value",(function(e){t.foods=e.val(),t.foods=t.foods.map((function(t){return t.name})),t.foodstype=t.foods.map((function(){return"0"}))})),F["a"].database().ref("watsdinner/data").once("value",(function(e){t.len=e.val().length,t.questions=e.val().map((function(t){return t.question}))})),this.typein=!1,this.data={question:"",Answer1:"",Answer2:"",tagsfoods:[],independentfoods:[]}}},created:function(){var t=this;-1!=document.cookie.indexOf("username")&&(this.login=!0),F["a"].database().ref("watsdinner/foods").once("value",(function(e){t.foods=e.val(),t.foods=t.foods.map((function(t){return t.name})),t.foodstype=t.foods.map((function(){return"0"}))})),F["a"].database().ref("watsdinner/data").once("value",(function(e){t.len=e.val().length,t.questions=e.val().map((function(t){return t.question}))}))},mounted:function(){var t=this;if(0==this.login){var e={callbacks:{signInSuccessWithAuthResult:function(e){return document.cookie="username="+e.user.email+"; max-age=2592000; path=/",t.login=!0,!1}},signInFlow:"popup",signInSuccessUrl:window.location.href,signInOptions:[{provider:F["a"].auth.EmailAuthProvider.PROVIDER_ID,signInMethod:F["a"].auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD,forceSameDevice:!1,emailLinkSignIn:function(){return{url:window.location.href,handleCodeInApp:!0}}}]};Et.start("#firebaseui-auth-container",e)}}};n("8a32");Mt.render=Qt,Mt.__scopeId="data-v-55b5f1c8";var Ut=Mt,Pt={name:"questionhome",components:{QuestionSetting:Ut}};Pt.render=nt;var Tt=Pt,Vt=[{path:"/",name:"Watsdinner",component:tt},{path:"/QuestionSetting",name:"QuestionSetting",component:Tt}],Wt=Object(b["a"])({history:Object(b["b"])("/watsdinner/"),routes:Vt}),Dt=Wt;Object(o["c"])(l).use(Dt).mount("#app")},"8a32":function(t,e,n){"use strict";n("f393")},c6fd:function(t,e,n){},f393:function(t,e,n){}});
//# sourceMappingURL=app.9266f12a.js.map